{"ast":null,"code":"import _objectSpread from\"/var/www/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{UsersIcon,BuildingOfficeIcon,ChartBarIcon,PlusIcon,PencilIcon,TrashIcon,EyeIcon,CheckCircleIcon,XCircleIcon,XMarkIcon,ArrowPathIcon}from'@heroicons/react/24/outline';import{useAuth}from'../contexts/AuthContext';// Modal reutilizável para cadastro/edição de usuário\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserModal=_ref=>{let{open,onClose,onSave,initialData,niveis,usuarios}=_ref;const[form,setForm]=useState({nome:'',email:'',senha:'',cargo:'',setor:'',admin:false,podeVerTodosOrcamentos:false,ativo:true,niveis:[],usuariosPermitidos:[]});useEffect(()=>{if(initialData){var _initialData$ativo;setForm({nome:initialData.nome||'',email:initialData.email||'',senha:'',cargo:initialData.cargo||'',setor:initialData.setor||'',admin:initialData.admin||false,podeVerTodosOrcamentos:initialData.podeVerTodosOrcamentos||false,ativo:(_initialData$ativo=initialData.ativo)!==null&&_initialData$ativo!==void 0?_initialData$ativo:true,niveis:initialData.niveis?initialData.niveis.map(n=>typeof n==='object'&&n!==null?n.id:n):[],usuariosPermitidos:initialData.usuariosPermitidos?initialData.usuariosPermitidos.map(u=>typeof u==='object'&&u!==null?u.id:u):[]});}else{setForm({nome:'',email:'',senha:'',cargo:'',setor:'',admin:false,podeVerTodosOrcamentos:false,ativo:true,niveis:[],usuariosPermitidos:[]});}},[initialData]);const handleChange=e=>{const{name,value,type,checked}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));};const handleSubmit=e=>{e.preventDefault();onSave(form);};if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 \".concat(open?'':'hidden'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium\",children:initialData?'Editar Usuário':'Novo Usuário'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nome *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.nome,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{nome:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:form.email,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{email:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:initialData?'Nova Senha (deixe em branco para manter)':'Senha *'}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:form.senha,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{senha:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\",required:!initialData})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Cargo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.cargo,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{cargo:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Setor\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.setor,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{setor:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"admin\",checked:form.admin,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{admin:e.target.checked})),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"admin\",className:\"ml-2 block text-sm text-gray-900\",children:\"Administrador\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"ativo\",checked:form.ativo,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{ativo:e.target.checked})),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ativo\",className:\"ml-2 block text-sm text-gray-900\",children:\"Ativo\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"podeVerTodosOrcamentos\",checked:form.podeVerTodosOrcamentos,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{podeVerTodosOrcamentos:e.target.checked})),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"podeVerTodosOrcamentos\",className:\"ml-2 block text-sm text-gray-900\",children:\"Pode ver todos os or\\xE7amentos (Alta Lideran\\xE7a)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"N\\xEDveis do usu\\xE1rio\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:niveis.map(nivel=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:form.niveis.includes(nivel.id),onChange:e=>{if(e.target.checked){setForm(prev=>_objectSpread(_objectSpread({},prev),{},{niveis:[...prev.niveis,nivel.id]}));}else{setForm(prev=>_objectSpread(_objectSpread({},prev),{},{niveis:prev.niveis.filter(id=>id!==nivel.id)}));}}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:nivel.nome})]},nivel.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Pode ver or\\xE7amentos de:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 max-h-32 overflow-y-auto\",children:usuarios.filter(u=>!initialData||u.id!==initialData.id).map(u=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:form.usuariosPermitidos.includes(u.id),onChange:e=>{if(e.target.checked){setForm(prev=>_objectSpread(_objectSpread({},prev),{},{usuariosPermitidos:[...prev.usuariosPermitidos,u.id]}));}else{setForm(prev=>_objectSpread(_objectSpread({},prev),{},{usuariosPermitidos:prev.usuariosPermitidos.filter(id=>id!==u.id)}));}}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:u.nome})]},u.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700\",children:initialData?'Atualizar':'Criar'})]})]})]})});};const NivelModal=_ref2=>{let{open,onClose,onSave,initialData}=_ref2;const[form,setForm]=useState({nome:'',prioridade:1,podeCriarOrcamento:true,podeAprovar:false,nivelFinal:false,ativo:true});useEffect(()=>{if(initialData){var _initialData$podeCria,_initialData$podeApro,_initialData$nivelFin,_initialData$ativo2;setForm({nome:initialData.nome||'',prioridade:initialData.prioridade||1,podeCriarOrcamento:(_initialData$podeCria=initialData.podeCriarOrcamento)!==null&&_initialData$podeCria!==void 0?_initialData$podeCria:true,podeAprovar:(_initialData$podeApro=initialData.podeAprovar)!==null&&_initialData$podeApro!==void 0?_initialData$podeApro:false,nivelFinal:(_initialData$nivelFin=initialData.nivelFinal)!==null&&_initialData$nivelFin!==void 0?_initialData$nivelFin:false,ativo:(_initialData$ativo2=initialData.ativo)!==null&&_initialData$ativo2!==void 0?_initialData$ativo2:true});}else{setForm({nome:'',prioridade:1,podeCriarOrcamento:true,podeAprovar:false,nivelFinal:false,ativo:true});}},[initialData,open]);const handleChange=e=>{const{name,value,type,checked}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:type==='number'?parseInt(value):value}));};const handleSubmit=e=>{e.preventDefault();onSave(form);};if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium mb-4\",children:initialData?'Editar Nível':'Novo Nível'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nome\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nome\",value:form.nome,onChange:handleChange,className:\"w-full border border-gray-300 rounded px-3 py-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Prioridade\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"prioridade\",value:form.prioridade,onChange:handleChange,min:\"1\",className:\"w-full border border-gray-300 rounded px-3 py-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"podeCriarOrcamento\",checked:form.podeCriarOrcamento,onChange:handleChange,className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Pode criar or\\xE7amentos\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"podeAprovar\",checked:form.podeAprovar,onChange:handleChange,className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Pode aprovar or\\xE7amentos\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"nivelFinal\",checked:form.nivelFinal,onChange:handleChange,className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"N\\xEDvel final de aprova\\xE7\\xE3o\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"ativo\",checked:form.ativo,onChange:handleChange,className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Ativo\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",children:\"Salvar\"})]})]})]})});};const FilialModal=_ref3=>{let{open,onClose,onSave,initialData}=_ref3;const[form,setForm]=useState({nome:'',endereco:'',telefone:'',ativo:true});useEffect(()=>{if(initialData){var _initialData$ativo3;setForm({nome:initialData.nome||'',endereco:initialData.endereco||'',telefone:initialData.telefone||'',ativo:(_initialData$ativo3=initialData.ativo)!==null&&_initialData$ativo3!==void 0?_initialData$ativo3:true});}else{setForm({nome:'',endereco:'',telefone:'',ativo:true});}},[initialData,open]);const handleChange=e=>{const{name,value,type,checked}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));};const handleSubmit=e=>{e.preventDefault();onSave(form);};if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium mb-4\",children:initialData?'Editar Filial':'Nova Filial'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nome da Filial\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nome\",value:form.nome,onChange:handleChange,className:\"w-full border border-gray-300 rounded px-3 py-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Endere\\xE7o\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"endereco\",value:form.endereco,onChange:handleChange,className:\"w-full border border-gray-300 rounded px-3 py-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Telefone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"telefone\",value:form.telefone,onChange:handleChange,className:\"w-full border border-gray-300 rounded px-3 py-2\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"ativo\",checked:form.ativo,onChange:handleChange,className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Ativa\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",children:\"Salvar\"})]})]})]})});};const Admin=()=>{const{user}=useAuth();const[activeTab,setActiveTab]=useState('dashboard');const[loading,setLoading]=useState(true);const[usuarios,setUsuarios]=useState([]);const[niveis,setNiveis]=useState([]);const[filiais,setFiliais]=useState([]);const[stats,setStats]=useState({totalUsuarios:0,usuariosAtivos:0,totalNiveis:0,niveisAtivos:0,totalFiliais:0,filiaisAtivas:0});const[fluxoModal,setFluxoModal]=useState(false);const[selectedUser,setSelectedUser]=useState(null);const[userFluxo,setUserFluxo]=useState([]);const[availableNiveis,setAvailableNiveis]=useState([]);const[userModalOpen,setUserModalOpen]=useState(false);const[editingUser,setEditingUser]=useState(null);const[nivelModalOpen,setNivelModalOpen]=useState(false);const[editingNivel,setEditingNivel]=useState(null);const[filialModalOpen,setFilialModalOpen]=useState(false);const[editingFilial,setEditingFilial]=useState(null);const[viewingFilial,setViewingFilial]=useState(null);const fetchData=async()=>{try{const token=localStorage.getItem('token');// Buscar dados em paralelo\nconst[usuariosRes,niveisRes,filiaisRes]=await Promise.all([fetch(\"http://192.168.1.120:5000/api/users\",{headers:{'Authorization':\"Bearer \".concat(token)}}),fetch(\"http://192.168.1.120:5000/api/niveis\",{headers:{'Authorization':\"Bearer \".concat(token)}}),fetch(\"http://192.168.1.120:5000/api/filiais\",{headers:{'Authorization':\"Bearer \".concat(token)}})]);if(usuariosRes.ok){const usuariosData=await usuariosRes.json();setUsuarios(usuariosData);}if(niveisRes.ok){const niveisData=await niveisRes.json();setNiveis(niveisData);}if(filiaisRes.ok){const filiaisData=await filiaisRes.json();setFiliais(filiaisData);}// Calcular estatísticas\nsetStats({totalUsuarios:usuarios.length,usuariosAtivos:usuarios.filter(u=>u.ativo).length,totalNiveis:niveis.length,niveisAtivos:niveis.filter(n=>n.ativo).length,totalFiliais:filiais.length,filiaisAtivas:filiais.filter(f=>f.ativo).length});}catch(error){console.error('Erro ao carregar dados:',error);}finally{setLoading(false);}};useEffect(()=>{fetchData();},[]);const handleToggleStatus=async(type,id,currentStatus)=>{try{console.log(\"Tentando alterar status do \".concat(type,\" ID \").concat(id,\" de \").concat(currentStatus,\" para \").concat(!currentStatus));const token=localStorage.getItem('token');console.log('Token obtido:',token?token.substring(0,20)+'...':'Token não encontrado');const endpoint=type==='usuario'?'users':type==='nivel'?'niveis':'filiais';console.log(\"Fazendo requisi\\xE7\\xE3o PATCH para: http://192.168.1.120:5000/api/\".concat(endpoint,\"/\").concat(id));const response=await fetch(\"http://192.168.1.120:5000/api/\".concat(endpoint,\"/\").concat(id),{method:'PATCH',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({ativo:!currentStatus})});console.log(\"Resposta recebida: \".concat(response.status,\" \").concat(response.statusText));if(response.ok){console.log(\"\".concat(type,\" \").concat(currentStatus?'desativado':'ativado',\" com sucesso!\"));fetchData();// Recarregar dados\n}else{const errorData=await response.json();console.error(\"Erro na resposta:\",errorData);alert(\"Erro ao alterar status do \".concat(type,\": \").concat(errorData.error||'Erro desconhecido'));}}catch(error){console.error(\"Erro ao alterar status do \".concat(type,\":\"),error);alert(\"Erro ao alterar status do \".concat(type,\": \").concat(error));}};const handleDelete=async(type,id)=>{if(!window.confirm(\"Tem certeza que deseja excluir este \".concat(type,\"?\"))){return;}try{const token=localStorage.getItem('token');const endpoint=type==='usuario'?'users':type==='nivel'?'niveis':'filiais';const response=await fetch(\"http://192.168.1.120:5000/api/\".concat(endpoint,\"/\").concat(id),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.ok){fetchData();// Recarregar dados\n}}catch(error){console.error(\"Erro ao excluir \".concat(type,\":\"),error);}};// Carregar fluxo de um usuário\nconst loadUserFluxo=async userId=>{try{const token=localStorage.getItem('token');const response=await fetch(\"http://192.168.1.120:5000/api/users/\".concat(userId,\"/fluxo\"),{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const fluxo=await response.json();setUserFluxo(fluxo);}else{setUserFluxo([]);}}catch(error){console.error('Erro ao carregar fluxo:',error);setUserFluxo([]);}};// Salvar fluxo de um usuário\nconst saveUserFluxo=async()=>{if(!selectedUser)return;try{const token=localStorage.getItem('token');const niveis=userFluxo.map(item=>item.nivelId||item.nivel.id);const response=await fetch(\"http://192.168.1.120:5000/api/users/\".concat(selectedUser.id,\"/fluxo\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({niveis})});if(response.ok){const fluxo=await response.json();setUserFluxo(fluxo);alert('Fluxo salvo com sucesso!');}else{const error=await response.json();alert(\"Erro ao salvar fluxo: \".concat(error.error));}}catch(error){console.error('Erro ao salvar fluxo:',error);alert('Erro ao salvar fluxo');}};// Remover fluxo de um usuário\nconst removeUserFluxo=async()=>{if(!selectedUser)return;if(!window.confirm('Tem certeza que deseja remover o fluxo personalizado deste usuário?')){return;}try{const token=localStorage.getItem('token');const response=await fetch(\"http://192.168.1.120:5000/api/users/\".concat(selectedUser.id,\"/fluxo\"),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){setUserFluxo([]);alert('Fluxo removido com sucesso!');}else{const error=await response.json();alert(\"Erro ao remover fluxo: \".concat(error.error));}}catch(error){console.error('Erro ao remover fluxo:',error);alert('Erro ao remover fluxo');}};// Adicionar nível ao fluxo\nconst addNivelToFluxo=nivel=>{const novoItem={id:Date.now(),// ID temporário\nnivelId:nivel.id,nivel:nivel,ordem:userFluxo.length+1,ativo:true};setUserFluxo([...userFluxo,novoItem]);};// Remover nível do fluxo\nconst removeNivelFromFluxo=index=>{setUserFluxo(userFluxo.filter((_,i)=>i!==index));};// Mover nível no fluxo\nconst moveNivelInFluxo=(fromIndex,toIndex)=>{const newFluxo=[...userFluxo];const[removed]=newFluxo.splice(fromIndex,1);newFluxo.splice(toIndex,0,removed);setUserFluxo(newFluxo);};// Abrir modal de fluxo\nconst openFluxoModal=async user=>{console.log('Abrindo modal de fluxo para usuário:',user);setSelectedUser(user);setFluxoModal(true);await loadUserFluxo(user.id);};// Função para criar usuário\nconst handleCreateUser=async form=>{try{const token=localStorage.getItem('token');const response=await fetch(\"http://192.168.1.120:5000/api/users\",{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},form),{},{usuariosPermitidos:form.usuariosPermitidos}))});if(response.ok){alert('Usuário criado com sucesso!');setUserModalOpen(false);fetchData();}else{const errorData=await response.json();alert(\"Erro ao criar usu\\xE1rio: \".concat(errorData.error||'Erro desconhecido'));}}catch(error){console.error('Erro ao criar usuário:',error);alert('Erro ao criar usuário');}};// Função para editar usuário\nconst handleUpdateUser=async form=>{try{const token=localStorage.getItem('token');const response=await fetch(\"http://192.168.1.120:5000/api/users/\".concat(editingUser===null||editingUser===void 0?void 0:editingUser.id),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},form),{},{usuariosPermitidos:form.usuariosPermitidos}))});if(response.ok){alert('Usuário atualizado com sucesso!');setUserModalOpen(false);setEditingUser(null);fetchData();}else{const errorData=await response.json();alert(\"Erro ao atualizar usu\\xE1rio: \".concat(errorData.error||'Erro desconhecido'));}}catch(error){console.error('Erro ao atualizar usuário:',error);alert('Erro ao atualizar usuário');}};// Substituir handleEditUser\nconst handleEditUser=user=>{const niveisIds=user.usuarioNiveis?user.usuarioNiveis.map(un=>un.nivel.id):[];setEditingUser(_objectSpread(_objectSpread({},user),{},{niveis:niveisIds}));setUserModalOpen(true);};const handleCreateNivel=async form=>{try{const token=localStorage.getItem('token');const response=await fetch(\"http://192.168.1.120:5000/api/niveis\",{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(form)});if(response.ok){setNivelModalOpen(false);setEditingNivel(null);fetchData();alert('Nível criado com sucesso!');}else{const error=await response.json();alert(\"Erro ao criar n\\xEDvel: \".concat(error.error));}}catch(error){console.error('Erro ao criar nível:',error);alert('Erro ao criar nível');}};const handleUpdateNivel=async form=>{if(!editingNivel)return;try{const token=localStorage.getItem('token');const response=await fetch(\"http://192.168.1.120:5000/api/niveis/\".concat(editingNivel.id),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(form)});if(response.ok){setNivelModalOpen(false);setEditingNivel(null);fetchData();alert('Nível atualizado com sucesso!');}else{const error=await response.json();alert(\"Erro ao atualizar n\\xEDvel: \".concat(error.error));}}catch(error){console.error('Erro ao atualizar nível:',error);alert('Erro ao atualizar nível');}};const handleEditNivel=nivel=>{setEditingNivel(nivel);setNivelModalOpen(true);};const handleCreateFilial=async form=>{try{const token=localStorage.getItem('token');const response=await fetch(\"http://192.168.1.120:5000/api/filiais\",{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(form)});if(response.ok){setFilialModalOpen(false);setEditingFilial(null);fetchData();alert('Filial criada com sucesso!');}else{const error=await response.json();alert(\"Erro ao criar filial: \".concat(error.error));}}catch(error){console.error('Erro ao criar filial:',error);alert('Erro ao criar filial');}};const handleUpdateFilial=async form=>{if(!editingFilial)return;try{const token=localStorage.getItem('token');const response=await fetch(\"http://192.168.1.120:5000/api/filiais/\".concat(editingFilial.id),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(form)});if(response.ok){setFilialModalOpen(false);setEditingFilial(null);fetchData();alert('Filial atualizada com sucesso!');}else{const error=await response.json();alert(\"Erro ao atualizar filial: \".concat(error.error));}}catch(error){console.error('Erro ao atualizar filial:',error);alert('Erro ao atualizar filial');}};const handleEditFilial=filial=>{setEditingFilial(filial);setFilialModalOpen(true);};const handleViewFilial=filial=>{setViewingFilial(filial);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Administra\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"Gerencie usu\\xE1rios, n\\xEDveis de aprova\\xE7\\xE3o e filiais do sistema.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8 px-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('dashboard'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='dashboard'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(ChartBarIcon,{className:\"h-5 w-5 inline mr-2\"}),\"Dashboard\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('usuarios'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='usuarios'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"h-5 w-5 inline mr-2\"}),\"Usu\\xE1rios\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('niveis'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='niveis'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(ChartBarIcon,{className:\"h-5 w-5 inline mr-2\"}),\"N\\xEDveis\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('filiais'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='filiais'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(BuildingOfficeIcon,{className:\"h-5 w-5 inline mr-2\"}),\"Filiais\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[activeTab==='dashboard'&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"h-8 w-8 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-blue-600\",children:\"Usu\\xE1rios\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-900\",children:stats.totalUsuarios}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600\",children:[stats.usuariosAtivos,\" ativos\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ChartBarIcon,{className:\"h-8 w-8 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-green-600\",children:\"N\\xEDveis\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-900\",children:stats.totalNiveis}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-600\",children:[stats.niveisAtivos,\" ativos\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-50 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(BuildingOfficeIcon,{className:\"h-8 w-8 text-purple-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-purple-600\",children:\"Filiais\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-900\",children:stats.totalFiliais}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-purple-600\",children:[stats.filiaisAtivas,\" ativas\"]})]})]})})]})}),activeTab==='usuarios'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Usu\\xE1rios do Sistema\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\",onClick:()=>{setEditingUser(null);setUserModalOpen(true);},children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Novo Usu\\xE1rio\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Usu\\xE1rio\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Cargo/Setor\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:usuarios.map(usuario=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:usuario.nome}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:usuario.email})]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:usuario.cargo}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:usuario.setor})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(usuario.ativo?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:[usuario.ativo?/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 mr-1\"}):/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-4 w-4 mr-1\"}),usuario.ativo?'Ativo':'Inativo']})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(usuario.admin?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:usuario.admin?'Sim':'Não'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditUser(usuario),className:\"text-blue-600 hover:text-blue-900\",title:\"Editar usu\\xE1rio\",children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openFluxoModal(usuario),className:\"inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-green-100 border border-green-300 rounded hover:bg-green-200\",title:\"Configurar fluxo de aprova\\xE7\\xE3o\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{className:\"h-3 w-3 mr-1\"}),\"Fluxo\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('Botão de ativar/desativar clicado para usuário:',usuario);handleToggleStatus('usuario',usuario.id,usuario.ativo);},className:\"text-yellow-600 hover:text-yellow-900\",title:usuario.ativo?'Desativar usuário':'Ativar usuário',children:usuario.ativo?/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete('usuario',usuario.id),className:\"text-red-600 hover:text-red-900\",title:\"Excluir usu\\xE1rio\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})})]},usuario.id))})]})})]}),activeTab==='niveis'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"N\\xEDveis de Aprova\\xE7\\xE3o\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setNivelModalOpen(true),className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Novo N\\xEDvel\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"N\\xEDvel\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Prioridade\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Permiss\\xF5es\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:niveis.map(nivel=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:nivel.nome})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:nivel.prioridade})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded text-xs \".concat(nivel.podeCriarOrcamento?'bg-green-100 text-green-800':'bg-gray-100 text-gray-800'),children:nivel.podeCriarOrcamento?'Criar':'Não Criar'}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded text-xs \".concat(nivel.podeAprovar?'bg-blue-100 text-blue-800':'bg-gray-100 text-gray-800'),children:nivel.podeAprovar?'Aprovar':'Não Aprovar'}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded text-xs \".concat(nivel.nivelFinal?'bg-purple-100 text-purple-800':'bg-gray-100 text-gray-800'),children:nivel.nivelFinal?'Final':'Não Final'})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(nivel.ativo?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:[nivel.ativo?/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 mr-1\"}):/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-4 w-4 mr-1\"}),nivel.ativo?'Ativo':'Inativo']})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditNivel(nivel),className:\"text-green-600 hover:text-green-900\",title:\"Editar n\\xEDvel\",children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete('nivel',nivel.id),className:\"text-red-600 hover:text-red-900\",title:\"Excluir n\\xEDvel\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})})]},nivel.id))})]})})]}),(user===null||user===void 0?void 0:user.admin)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 p-4 border rounded bg-yellow-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold mb-2 text-yellow-800\",children:\"Ferramentas de Teste\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\",onClick:async()=>{if(window.confirm('Tem certeza que deseja limpar TODOS os orçamentos do banco? Esta ação não pode ser desfeita!')){try{const token=localStorage.getItem('token');const res=await fetch(\"http://192.168.1.120:5000/api/orcamentos/limpar-todos\",{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token)}});if(res.ok){alert('Todos os orçamentos foram removidos com sucesso!');}else{const data=await res.json();alert('Erro ao limpar orçamentos: '+(data.error||'Erro desconhecido.'));}}catch(e){alert('Erro ao conectar com o servidor.');}}},children:\"Limpar banco de or\\xE7amentos (TESTE)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-yellow-700 mt-2\",children:\"Este bot\\xE3o remove todos os or\\xE7amentos, aprova\\xE7\\xF5es e rejei\\xE7\\xF5es do banco. Use apenas para testes! No projeto final, remova este bot\\xE3o.\"})]}),activeTab==='filiais'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Filiais\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilialModalOpen(true),className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Nova Filial\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Filial\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Contato\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filiais.map(filial=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:filial.nome}),filial.endereco&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:filial.endereco})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:filial.telefone||'N/A'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(filial.ativo?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:[filial.ativo?/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 mr-1\"}):/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-4 w-4 mr-1\"}),filial.ativo?'Ativa':'Inativa']})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewFilial(filial),className:\"text-blue-600 hover:text-blue-900\",title:\"Visualizar filial\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditFilial(filial),className:\"text-green-600 hover:text-green-900\",title:\"Editar filial\",children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete('filial',filial.id),className:\"text-red-600 hover:text-red-900\",title:\"Excluir filial\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})})]},filial.id))})]})})]})]})]}),fluxoModal&&selectedUser&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold\",children:[\"Fluxo de Aprova\\xE7\\xE3o - \",selectedUser.nome]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFluxoModal(false),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4\",children:\"Configure a ordem de aprova\\xE7\\xE3o para este usu\\xE1rio. Os or\\xE7amentos seguir\\xE3o esta sequ\\xEAncia.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"Fluxo Atual:\"}),userFluxo.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 italic\",children:\"Nenhum fluxo personalizado configurado (usar\\xE1 fluxo padr\\xE3o)\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:userFluxo.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-gray-50 p-3 rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bg-blue-500 text-white px-2 py-1 rounded text-sm\",children:index+1}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:item.nivel.nome})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[index>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>moveNivelInFluxo(index,index-1),className:\"text-blue-600 hover:text-blue-800\",children:\"\\u2191\"}),index<userFluxo.length-1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>moveNivelInFluxo(index,index+1),className:\"text-blue-600 hover:text-blue-800\",children:\"\\u2193\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeNivelFromFluxo(index),className:\"text-red-600 hover:text-red-800\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-4 w-4\"})})]})]},item.id||index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"Adicionar N\\xEDvel:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-2\",children:niveis.filter(nivel=>!userFluxo.some(item=>{var _item$nivel;return item.nivelId===nivel.id||((_item$nivel=item.nivel)===null||_item$nivel===void 0?void 0:_item$nivel.id)===nivel.id;})).map(nivel=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>addNivelToFluxo(nivel),className:\"text-left p-2 border rounded hover:bg-gray-50\",children:nivel.nome},nivel.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:removeUserFluxo,className:\"px-4 py-2 text-red-600 border border-red-600 rounded hover:bg-red-50\",children:\"Remover Fluxo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveUserFluxo,className:\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",children:\"Salvar Fluxo\"})]})]})}),/*#__PURE__*/_jsx(UserModal,{open:userModalOpen,onClose:()=>{setUserModalOpen(false);setEditingUser(null);},onSave:editingUser?handleUpdateUser:handleCreateUser,initialData:editingUser,niveis:niveis,usuarios:usuarios}),/*#__PURE__*/_jsx(NivelModal,{open:nivelModalOpen,onClose:()=>{setNivelModalOpen(false);setEditingNivel(null);},onSave:editingNivel?handleUpdateNivel:handleCreateNivel,initialData:editingNivel}),/*#__PURE__*/_jsx(FilialModal,{open:filialModalOpen,onClose:()=>{setFilialModalOpen(false);setEditingFilial(null);},onSave:editingFilial?handleUpdateFilial:handleCreateFilial,initialData:editingFilial}),viewingFilial&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium\",children:\"Detalhes da Filial\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewingFilial(null),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nome da Filial\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:viewingFilial.nome})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Endere\\xE7o\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:viewingFilial.endereco||'Não informado'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Telefone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:viewingFilial.telefone||'Não informado'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(viewingFilial.ativo?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:[viewingFilial.ativo?/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 mr-1\"}):/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-4 w-4 mr-1\"}),viewingFilial.ativo?'Ativa':'Inativa']})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewingFilial(null),className:\"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\",children:\"Fechar\"})})]})})]});};export default Admin;","map":{"version":3,"names":["React","useState","useEffect","UsersIcon","BuildingOfficeIcon","ChartBarIcon","PlusIcon","PencilIcon","TrashIcon","EyeIcon","CheckCircleIcon","XCircleIcon","XMarkIcon","ArrowPathIcon","useAuth","jsx","_jsx","jsxs","_jsxs","UserModal","_ref","open","onClose","onSave","initialData","niveis","usuarios","form","setForm","nome","email","senha","cargo","setor","admin","podeVerTodosOrcamentos","ativo","usuariosPermitidos","_initialData$ativo","map","n","id","u","handleChange","e","name","value","type","checked","target","prev","_objectSpread","handleSubmit","preventDefault","className","concat","children","onClick","onSubmit","onChange","required","htmlFor","nivel","includes","filter","NivelModal","_ref2","prioridade","podeCriarOrcamento","podeAprovar","nivelFinal","_initialData$podeCria","_initialData$podeApro","_initialData$nivelFin","_initialData$ativo2","parseInt","min","FilialModal","_ref3","endereco","telefone","_initialData$ativo3","Admin","user","activeTab","setActiveTab","loading","setLoading","setUsuarios","setNiveis","filiais","setFiliais","stats","setStats","totalUsuarios","usuariosAtivos","totalNiveis","niveisAtivos","totalFiliais","filiaisAtivas","fluxoModal","setFluxoModal","selectedUser","setSelectedUser","userFluxo","setUserFluxo","availableNiveis","setAvailableNiveis","userModalOpen","setUserModalOpen","editingUser","setEditingUser","nivelModalOpen","setNivelModalOpen","editingNivel","setEditingNivel","filialModalOpen","setFilialModalOpen","editingFilial","setEditingFilial","viewingFilial","setViewingFilial","fetchData","token","localStorage","getItem","usuariosRes","niveisRes","filiaisRes","Promise","all","fetch","headers","ok","usuariosData","json","niveisData","filiaisData","length","f","error","console","handleToggleStatus","currentStatus","log","substring","endpoint","response","method","body","JSON","stringify","status","statusText","errorData","alert","handleDelete","window","confirm","loadUserFluxo","userId","fluxo","saveUserFluxo","item","nivelId","removeUserFluxo","addNivelToFluxo","novoItem","Date","now","ordem","removeNivelFromFluxo","index","_","i","moveNivelInFluxo","fromIndex","toIndex","newFluxo","removed","splice","openFluxoModal","handleCreateUser","handleUpdateUser","handleEditUser","niveisIds","usuarioNiveis","un","handleCreateNivel","handleUpdateNivel","handleEditNivel","handleCreateFilial","handleUpdateFilial","handleEditFilial","filial","handleViewFilial","usuario","title","res","data","some","_item$nivel"],"sources":["/var/www/frontend/src/pages/Admin.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  UsersIcon, \n  BuildingOfficeIcon, \n  ChartBarIcon,\n  PlusIcon,\n  PencilIcon,\n  TrashIcon,\n  EyeIcon,\n  CheckCircleIcon,\n  XCircleIcon,\n  XMarkIcon,\n  ArrowPathIcon\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface Usuario {\n  id: number;\n  nome: string;\n  email: string;\n  cargo: string;\n  setor: string;\n  ativo: boolean;\n  admin: boolean;\n  podeVerTodosOrcamentos: boolean;\n  createdAt: string;\n  usuarioNiveis?: Array<{ nivel: Nivel }>;\n}\n\ninterface Nivel {\n  id: number;\n  nome: string;\n  prioridade: number;\n  podeCriarOrcamento: boolean;\n  podeAprovar: boolean;\n  nivelFinal: boolean;\n  ativo: boolean;\n}\n\ninterface Filial {\n  id: number;\n  nome: string;\n  endereco?: string;\n  telefone?: string;\n  ativo: boolean;\n}\n\ninterface DashboardStats {\n  totalUsuarios: number;\n  usuariosAtivos: number;\n  totalNiveis: number;\n  niveisAtivos: number;\n  totalFiliais: number;\n  filiaisAtivas: number;\n}\n\n// Modal reutilizável para cadastro/edição de usuário\ninterface UserModalProps {\n  open: boolean;\n  onClose: () => void;\n  onSave: (form: any) => void;\n  initialData: any;\n  niveis: Nivel[];\n  usuarios: Usuario[];\n}\n\ninterface NivelModalProps {\n  open: boolean;\n  onClose: () => void;\n  onSave: (form: any) => void;\n  initialData: any;\n}\n\ninterface FilialModalProps {\n  open: boolean;\n  onClose: () => void;\n  onSave: (form: any) => void;\n  initialData: any;\n}\n\nconst UserModal: React.FC<UserModalProps & {usuarios: Usuario[]}> = ({ open, onClose, onSave, initialData, niveis, usuarios }) => {\n  const [form, setForm] = useState<{\n    nome: string;\n    email: string;\n    senha: string;\n    cargo: string;\n    setor: string;\n    admin: boolean;\n    podeVerTodosOrcamentos: boolean;\n    ativo: boolean;\n    niveis: number[];\n    usuariosPermitidos: number[];\n  }>({\n    nome: '',\n    email: '',\n    senha: '',\n    cargo: '',\n    setor: '',\n    admin: false,\n    podeVerTodosOrcamentos: false,\n    ativo: true,\n    niveis: [],\n    usuariosPermitidos: [],\n  });\n\n  useEffect(() => {\n    if (initialData) {\n      setForm({\n        nome: initialData.nome || '',\n        email: initialData.email || '',\n        senha: '',\n        cargo: initialData.cargo || '',\n        setor: initialData.setor || '',\n        admin: initialData.admin || false,\n        podeVerTodosOrcamentos: initialData.podeVerTodosOrcamentos || false,\n        ativo: initialData.ativo ?? true,\n        niveis: initialData.niveis\n          ? initialData.niveis.map((n: any) => typeof n === 'object' && n !== null ? n.id : n)\n          : [],\n        usuariosPermitidos: initialData.usuariosPermitidos\n          ? initialData.usuariosPermitidos.map((u: any) => typeof u === 'object' && u !== null ? u.id : u)\n          : [],\n      });\n    } else {\n      setForm({\n        nome: '',\n        email: '',\n        senha: '',\n        cargo: '',\n        setor: '',\n        admin: false,\n        podeVerTodosOrcamentos: false,\n        ativo: true,\n        niveis: [],\n        usuariosPermitidos: [],\n      });\n    }\n  }, [initialData]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setForm(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSave(form);\n  };\n\n  if (!open) return null;\n  return (\n    <div className={`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ${open ? '' : 'hidden'}`}>\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-medium\">\n            {initialData ? 'Editar Usuário' : 'Novo Usuário'}\n          </h3>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Nome *\n            </label>\n            <input\n              type=\"text\"\n              value={form.nome}\n              onChange={(e) => setForm({ ...form, nome: e.target.value })}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Email *\n            </label>\n            <input\n              type=\"email\"\n              value={form.email}\n              onChange={(e) => setForm({ ...form, email: e.target.value })}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              {initialData ? 'Nova Senha (deixe em branco para manter)' : 'Senha *'}\n            </label>\n            <input\n              type=\"password\"\n              value={form.senha}\n              onChange={(e) => setForm({ ...form, senha: e.target.value })}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n              required={!initialData}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Cargo\n            </label>\n            <input\n              type=\"text\"\n              value={form.cargo}\n              onChange={(e) => setForm({ ...form, cargo: e.target.value })}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Setor\n            </label>\n            <input\n              type=\"text\"\n              value={form.setor}\n              onChange={(e) => setForm({ ...form, setor: e.target.value })}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n            />\n          </div>\n\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"admin\"\n                checked={form.admin}\n                onChange={(e) => setForm({ ...form, admin: e.target.checked })}\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n              />\n              <label htmlFor=\"admin\" className=\"ml-2 block text-sm text-gray-900\">\n                Administrador\n              </label>\n            </div>\n\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"ativo\"\n                checked={form.ativo}\n                onChange={(e) => setForm({ ...form, ativo: e.target.checked })}\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n              />\n              <label htmlFor=\"ativo\" className=\"ml-2 block text-sm text-gray-900\">\n                Ativo\n              </label>\n            </div>\n          </div>\n\n          <div className=\"flex items-center\">\n            <input\n              type=\"checkbox\"\n              id=\"podeVerTodosOrcamentos\"\n              checked={form.podeVerTodosOrcamentos}\n              onChange={(e) => setForm({ ...form, podeVerTodosOrcamentos: e.target.checked })}\n              className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            />\n            <label htmlFor=\"podeVerTodosOrcamentos\" className=\"ml-2 block text-sm text-gray-900\">\n              Pode ver todos os orçamentos (Alta Liderança)\n            </label>\n          </div>\n\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Níveis do usuário\n            </label>\n            <div className=\"flex flex-wrap gap-2\">\n              {niveis.map((nivel) => (\n                <label key={nivel.id} className=\"flex items-center space-x-1\">\n                  <input\n                    type=\"checkbox\"\n                    checked={form.niveis.includes(nivel.id)}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setForm((prev) => ({\n                          ...prev,\n                          niveis: [...prev.niveis, nivel.id],\n                        }));\n                      } else {\n                        setForm((prev) => ({\n                          ...prev,\n                          niveis: prev.niveis.filter((id) => id !== nivel.id),\n                        }));\n                      }\n                    }}\n                  />\n                  <span className=\"text-sm\">{nivel.nome}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"mb-4\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Pode ver orçamentos de:\n            </label>\n            <div className=\"flex flex-wrap gap-2 max-h-32 overflow-y-auto\">\n              {usuarios.filter(u => !initialData || u.id !== initialData.id).map((u) => (\n                <label key={u.id} className=\"flex items-center space-x-1\">\n                  <input\n                    type=\"checkbox\"\n                    checked={form.usuariosPermitidos.includes(u.id)}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setForm((prev) => ({\n                          ...prev,\n                          usuariosPermitidos: [...prev.usuariosPermitidos, u.id],\n                        }));\n                      } else {\n                        setForm((prev) => ({\n                          ...prev,\n                          usuariosPermitidos: prev.usuariosPermitidos.filter((id) => id !== u.id),\n                        }));\n                      }\n                    }}\n                  />\n                  <span className=\"text-sm\">{u.nome}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50\"\n            >\n              Cancelar\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700\"\n            >\n              {initialData ? 'Atualizar' : 'Criar'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst NivelModal: React.FC<NivelModalProps> = ({ open, onClose, onSave, initialData }) => {\n  const [form, setForm] = useState<{\n    nome: string;\n    prioridade: number;\n    podeCriarOrcamento: boolean;\n    podeAprovar: boolean;\n    nivelFinal: boolean;\n    ativo: boolean;\n  }>({\n    nome: '',\n    prioridade: 1,\n    podeCriarOrcamento: true,\n    podeAprovar: false,\n    nivelFinal: false,\n    ativo: true,\n  });\n\n  useEffect(() => {\n    if (initialData) {\n      setForm({\n        nome: initialData.nome || '',\n        prioridade: initialData.prioridade || 1,\n        podeCriarOrcamento: initialData.podeCriarOrcamento ?? true,\n        podeAprovar: initialData.podeAprovar ?? false,\n        nivelFinal: initialData.nivelFinal ?? false,\n        ativo: initialData.ativo ?? true,\n      });\n    } else {\n      setForm({\n        nome: '',\n        prioridade: 1,\n        podeCriarOrcamento: true,\n        podeAprovar: false,\n        nivelFinal: false,\n        ativo: true,\n      });\n    }\n  }, [initialData, open]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setForm((prev) => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : type === 'number' ? parseInt(value) : value,\n    }));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSave(form);\n  };\n\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <h3 className=\"text-lg font-medium mb-4\">\n          {initialData ? 'Editar Nível' : 'Novo Nível'}\n        </h3>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Nome\n            </label>\n            <input\n              type=\"text\"\n              name=\"nome\"\n              value={form.nome}\n              onChange={handleChange}\n              className=\"w-full border border-gray-300 rounded px-3 py-2\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Prioridade\n            </label>\n            <input\n              type=\"number\"\n              name=\"prioridade\"\n              value={form.prioridade}\n              onChange={handleChange}\n              min=\"1\"\n              className=\"w-full border border-gray-300 rounded px-3 py-2\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <label className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                name=\"podeCriarOrcamento\"\n                checked={form.podeCriarOrcamento}\n                onChange={handleChange}\n                className=\"mr-2\"\n              />\n              <span className=\"text-sm\">Pode criar orçamentos</span>\n            </label>\n            <label className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                name=\"podeAprovar\"\n                checked={form.podeAprovar}\n                onChange={handleChange}\n                className=\"mr-2\"\n              />\n              <span className=\"text-sm\">Pode aprovar orçamentos</span>\n            </label>\n            <label className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                name=\"nivelFinal\"\n                checked={form.nivelFinal}\n                onChange={handleChange}\n                className=\"mr-2\"\n              />\n              <span className=\"text-sm\">Nível final de aprovação</span>\n            </label>\n            <label className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                name=\"ativo\"\n                checked={form.ativo}\n                onChange={handleChange}\n                className=\"mr-2\"\n              />\n              <span className=\"text-sm\">Ativo</span>\n            </label>\n          </div>\n          <div className=\"flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50\"\n            >\n              Cancelar\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n            >\n              Salvar\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst FilialModal: React.FC<FilialModalProps> = ({ open, onClose, onSave, initialData }) => {\n  const [form, setForm] = useState<{\n    nome: string;\n    endereco: string;\n    telefone: string;\n    ativo: boolean;\n  }>({\n    nome: '',\n    endereco: '',\n    telefone: '',\n    ativo: true,\n  });\n\n  useEffect(() => {\n    if (initialData) {\n      setForm({\n        nome: initialData.nome || '',\n        endereco: initialData.endereco || '',\n        telefone: initialData.telefone || '',\n        ativo: initialData.ativo ?? true,\n      });\n    } else {\n      setForm({\n        nome: '',\n        endereco: '',\n        telefone: '',\n        ativo: true,\n      });\n    }\n  }, [initialData, open]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setForm((prev) => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value,\n    }));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSave(form);\n  };\n\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <h3 className=\"text-lg font-medium mb-4\">\n          {initialData ? 'Editar Filial' : 'Nova Filial'}\n        </h3>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Nome da Filial\n            </label>\n            <input\n              type=\"text\"\n              name=\"nome\"\n              value={form.nome}\n              onChange={handleChange}\n              className=\"w-full border border-gray-300 rounded px-3 py-2\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Endereço\n            </label>\n            <input\n              type=\"text\"\n              name=\"endereco\"\n              value={form.endereco}\n              onChange={handleChange}\n              className=\"w-full border border-gray-300 rounded px-3 py-2\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Telefone\n            </label>\n            <input\n              type=\"text\"\n              name=\"telefone\"\n              value={form.telefone}\n              onChange={handleChange}\n              className=\"w-full border border-gray-300 rounded px-3 py-2\"\n            />\n          </div>\n          <div>\n            <label className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                name=\"ativo\"\n                checked={form.ativo}\n                onChange={handleChange}\n                className=\"mr-2\"\n              />\n              <span className=\"text-sm\">Ativa</span>\n            </label>\n          </div>\n          <div className=\"flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50\"\n            >\n              Cancelar\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n            >\n              Salvar\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst Admin: React.FC = () => {\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState('dashboard');\n  const [loading, setLoading] = useState(true);\n  const [usuarios, setUsuarios] = useState<Usuario[]>([]);\n  const [niveis, setNiveis] = useState<Nivel[]>([]);\n  const [filiais, setFiliais] = useState<Filial[]>([]);\n  const [stats, setStats] = useState<DashboardStats>({\n    totalUsuarios: 0,\n    usuariosAtivos: 0,\n    totalNiveis: 0,\n    niveisAtivos: 0,\n    totalFiliais: 0,\n    filiaisAtivas: 0\n  });\n  const [fluxoModal, setFluxoModal] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<Usuario | null>(null);\n  const [userFluxo, setUserFluxo] = useState<any[]>([]);\n  const [availableNiveis, setAvailableNiveis] = useState<Nivel[]>([]);\n  const [userModalOpen, setUserModalOpen] = useState(false);\n  const [editingUser, setEditingUser] = useState<Usuario | null>(null);\n  const [nivelModalOpen, setNivelModalOpen] = useState(false);\n  const [editingNivel, setEditingNivel] = useState<Nivel | null>(null);\n  const [filialModalOpen, setFilialModalOpen] = useState(false);\n  const [editingFilial, setEditingFilial] = useState<Filial | null>(null);\n  const [viewingFilial, setViewingFilial] = useState<Filial | null>(null);\n\n  const fetchData = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      \n      // Buscar dados em paralelo\n      const [usuariosRes, niveisRes, filiaisRes] = await Promise.all([\n        fetch(`http://192.168.1.120:5000/api/users`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        }),\n        fetch(`http://192.168.1.120:5000/api/niveis`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        }),\n        fetch(`http://192.168.1.120:5000/api/filiais`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        })\n      ]);\n\n      if (usuariosRes.ok) {\n        const usuariosData = await usuariosRes.json();\n        setUsuarios(usuariosData);\n      }\n\n      if (niveisRes.ok) {\n        const niveisData = await niveisRes.json();\n        setNiveis(niveisData);\n      }\n\n      if (filiaisRes.ok) {\n        const filiaisData = await filiaisRes.json();\n        setFiliais(filiaisData);\n      }\n\n      // Calcular estatísticas\n      setStats({\n        totalUsuarios: usuarios.length,\n        usuariosAtivos: usuarios.filter(u => u.ativo).length,\n        totalNiveis: niveis.length,\n        niveisAtivos: niveis.filter(n => n.ativo).length,\n        totalFiliais: filiais.length,\n        filiaisAtivas: filiais.filter(f => f.ativo).length\n      });\n\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const handleToggleStatus = async (type: 'usuario' | 'nivel' | 'filial', id: number, currentStatus: boolean) => {\n    try {\n      console.log(`Tentando alterar status do ${type} ID ${id} de ${currentStatus} para ${!currentStatus}`);\n      \n      const token = localStorage.getItem('token');\n      console.log('Token obtido:', token ? token.substring(0, 20) + '...' : 'Token não encontrado');\n      \n      const endpoint = type === 'usuario' ? 'users' : type === 'nivel' ? 'niveis' : 'filiais';\n      \n      console.log(`Fazendo requisição PATCH para: http://192.168.1.120:5000/api/${endpoint}/${id}`);\n      \n      const response = await fetch(`http://192.168.1.120:5000/api/${endpoint}/${id}`, {\n        method: 'PATCH',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ ativo: !currentStatus })\n      });\n\n      console.log(`Resposta recebida: ${response.status} ${response.statusText}`);\n\n      if (response.ok) {\n        console.log(`${type} ${currentStatus ? 'desativado' : 'ativado'} com sucesso!`);\n        fetchData(); // Recarregar dados\n      } else {\n        const errorData = await response.json();\n        console.error(`Erro na resposta:`, errorData);\n        alert(`Erro ao alterar status do ${type}: ${errorData.error || 'Erro desconhecido'}`);\n      }\n    } catch (error) {\n      console.error(`Erro ao alterar status do ${type}:`, error);\n      alert(`Erro ao alterar status do ${type}: ${error}`);\n    }\n  };\n\n  const handleDelete = async (type: 'usuario' | 'nivel' | 'filial', id: number) => {\n    if (!window.confirm(`Tem certeza que deseja excluir este ${type}?`)) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      const endpoint = type === 'usuario' ? 'users' : type === 'nivel' ? 'niveis' : 'filiais';\n      \n      const response = await fetch(`http://192.168.1.120:5000/api/${endpoint}/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (response.ok) {\n        fetchData(); // Recarregar dados\n      }\n    } catch (error) {\n      console.error(`Erro ao excluir ${type}:`, error);\n    }\n  };\n\n  // Carregar fluxo de um usuário\n  const loadUserFluxo = async (userId: number) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://192.168.1.120:5000/api/users/${userId}/fluxo`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n      \n      if (response.ok) {\n        const fluxo = await response.json();\n        setUserFluxo(fluxo);\n      } else {\n        setUserFluxo([]);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar fluxo:', error);\n      setUserFluxo([]);\n    }\n  };\n\n  // Salvar fluxo de um usuário\n  const saveUserFluxo = async () => {\n    if (!selectedUser) return;\n\n    try {\n      const token = localStorage.getItem('token');\n      const niveis = userFluxo.map(item => item.nivelId || item.nivel.id);\n      \n      const response = await fetch(`http://192.168.1.120:5000/api/users/${selectedUser.id}/fluxo`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ niveis }),\n      });\n\n      if (response.ok) {\n        const fluxo = await response.json();\n        setUserFluxo(fluxo);\n        alert('Fluxo salvo com sucesso!');\n      } else {\n        const error = await response.json();\n        alert(`Erro ao salvar fluxo: ${error.error}`);\n      }\n    } catch (error) {\n      console.error('Erro ao salvar fluxo:', error);\n      alert('Erro ao salvar fluxo');\n    }\n  };\n\n  // Remover fluxo de um usuário\n  const removeUserFluxo = async () => {\n    if (!selectedUser) return;\n\n    if (!window.confirm('Tem certeza que deseja remover o fluxo personalizado deste usuário?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://192.168.1.120:5000/api/users/${selectedUser.id}/fluxo`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        setUserFluxo([]);\n        alert('Fluxo removido com sucesso!');\n      } else {\n        const error = await response.json();\n        alert(`Erro ao remover fluxo: ${error.error}`);\n      }\n    } catch (error) {\n      console.error('Erro ao remover fluxo:', error);\n      alert('Erro ao remover fluxo');\n    }\n  };\n\n  // Adicionar nível ao fluxo\n  const addNivelToFluxo = (nivel: Nivel) => {\n    const novoItem = {\n      id: Date.now(), // ID temporário\n      nivelId: nivel.id,\n      nivel: nivel,\n      ordem: userFluxo.length + 1,\n      ativo: true,\n    };\n    setUserFluxo([...userFluxo, novoItem]);\n  };\n\n  // Remover nível do fluxo\n  const removeNivelFromFluxo = (index: number) => {\n    setUserFluxo(userFluxo.filter((_, i) => i !== index));\n  };\n\n  // Mover nível no fluxo\n  const moveNivelInFluxo = (fromIndex: number, toIndex: number) => {\n    const newFluxo = [...userFluxo];\n    const [removed] = newFluxo.splice(fromIndex, 1);\n    newFluxo.splice(toIndex, 0, removed);\n    setUserFluxo(newFluxo);\n  };\n\n  // Abrir modal de fluxo\n  const openFluxoModal = async (user: Usuario) => {\n    console.log('Abrindo modal de fluxo para usuário:', user);\n    setSelectedUser(user);\n    setFluxoModal(true);\n    await loadUserFluxo(user.id);\n  };\n\n  // Função para criar usuário\n  const handleCreateUser = async (form: any) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://192.168.1.120:5000/api/users`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ ...form, usuariosPermitidos: form.usuariosPermitidos })\n      });\n\n      if (response.ok) {\n        alert('Usuário criado com sucesso!');\n        setUserModalOpen(false);\n        fetchData();\n      } else {\n        const errorData = await response.json();\n        alert(`Erro ao criar usuário: ${errorData.error || 'Erro desconhecido'}`);\n      }\n    } catch (error) {\n      console.error('Erro ao criar usuário:', error);\n      alert('Erro ao criar usuário');\n    }\n  };\n\n  // Função para editar usuário\n  const handleUpdateUser = async (form: any) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://192.168.1.120:5000/api/users/${editingUser?.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ ...form, usuariosPermitidos: form.usuariosPermitidos })\n      });\n\n      if (response.ok) {\n        alert('Usuário atualizado com sucesso!');\n        setUserModalOpen(false);\n        setEditingUser(null);\n        fetchData();\n      } else {\n        const errorData = await response.json();\n        alert(`Erro ao atualizar usuário: ${errorData.error || 'Erro desconhecido'}`);\n      }\n    } catch (error) {\n      console.error('Erro ao atualizar usuário:', error);\n      alert('Erro ao atualizar usuário');\n    }\n  };\n\n  // Substituir handleEditUser\n  const handleEditUser = (user: Usuario) => {\n    const niveisIds = user.usuarioNiveis ? user.usuarioNiveis.map((un: any) => un.nivel.id) : [];\n    setEditingUser({ ...(user as any), niveis: niveisIds });\n    setUserModalOpen(true);\n  };\n\n  const handleCreateNivel = async (form: {\n    nome: string;\n    prioridade: number;\n    podeCriarOrcamento: boolean;\n    podeAprovar: boolean;\n    nivelFinal: boolean;\n    ativo: boolean;\n  }) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://192.168.1.120:5000/api/niveis`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(form)\n      });\n\n      if (response.ok) {\n        setNivelModalOpen(false);\n        setEditingNivel(null);\n        fetchData();\n        alert('Nível criado com sucesso!');\n      } else {\n        const error = await response.json();\n        alert(`Erro ao criar nível: ${error.error}`);\n      }\n    } catch (error) {\n      console.error('Erro ao criar nível:', error);\n      alert('Erro ao criar nível');\n    }\n  };\n\n  const handleUpdateNivel = async (form: {\n    nome: string;\n    prioridade: number;\n    podeCriarOrcamento: boolean;\n    podeAprovar: boolean;\n    nivelFinal: boolean;\n    ativo: boolean;\n  }) => {\n    if (!editingNivel) return;\n\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://192.168.1.120:5000/api/niveis/${editingNivel.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(form)\n      });\n\n      if (response.ok) {\n        setNivelModalOpen(false);\n        setEditingNivel(null);\n        fetchData();\n        alert('Nível atualizado com sucesso!');\n      } else {\n        const error = await response.json();\n        alert(`Erro ao atualizar nível: ${error.error}`);\n      }\n    } catch (error) {\n      console.error('Erro ao atualizar nível:', error);\n      alert('Erro ao atualizar nível');\n    }\n  };\n\n  const handleEditNivel = (nivel: Nivel) => {\n    setEditingNivel(nivel);\n    setNivelModalOpen(true);\n  };\n\n  const handleCreateFilial = async (form: {\n    nome: string;\n    endereco: string;\n    telefone: string;\n    ativo: boolean;\n  }) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://192.168.1.120:5000/api/filiais`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(form)\n      });\n\n      if (response.ok) {\n        setFilialModalOpen(false);\n        setEditingFilial(null);\n        fetchData();\n        alert('Filial criada com sucesso!');\n      } else {\n        const error = await response.json();\n        alert(`Erro ao criar filial: ${error.error}`);\n      }\n    } catch (error) {\n      console.error('Erro ao criar filial:', error);\n      alert('Erro ao criar filial');\n    }\n  };\n\n  const handleUpdateFilial = async (form: {\n    nome: string;\n    endereco: string;\n    telefone: string;\n    ativo: boolean;\n  }) => {\n    if (!editingFilial) return;\n\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://192.168.1.120:5000/api/filiais/${editingFilial.id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(form)\n      });\n\n      if (response.ok) {\n        setFilialModalOpen(false);\n        setEditingFilial(null);\n        fetchData();\n        alert('Filial atualizada com sucesso!');\n      } else {\n        const error = await response.json();\n        alert(`Erro ao atualizar filial: ${error.error}`);\n      }\n    } catch (error) {\n      console.error('Erro ao atualizar filial:', error);\n      alert('Erro ao atualizar filial');\n    }\n  };\n\n  const handleEditFilial = (filial: Filial) => {\n    setEditingFilial(filial);\n    setFilialModalOpen(true);\n  };\n\n  const handleViewFilial = (filial: Filial) => {\n    setViewingFilial(filial);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Administração</h1>\n        <p className=\"mt-2 text-gray-600\">\n          Gerencie usuários, níveis de aprovação e filiais do sistema.\n        </p>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8 px-6\">\n            <button\n              onClick={() => setActiveTab('dashboard')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'dashboard'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <ChartBarIcon className=\"h-5 w-5 inline mr-2\" />\n              Dashboard\n            </button>\n            <button\n              onClick={() => setActiveTab('usuarios')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'usuarios'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <UsersIcon className=\"h-5 w-5 inline mr-2\" />\n              Usuários\n            </button>\n            <button\n              onClick={() => setActiveTab('niveis')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'niveis'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <ChartBarIcon className=\"h-5 w-5 inline mr-2\" />\n              Níveis\n            </button>\n            <button\n              onClick={() => setActiveTab('filiais')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'filiais'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <BuildingOfficeIcon className=\"h-5 w-5 inline mr-2\" />\n              Filiais\n            </button>\n          </nav>\n        </div>\n\n        <div className=\"p-6\">\n          {/* Dashboard Tab */}\n          {activeTab === 'dashboard' && (\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"bg-blue-50 rounded-lg p-6\">\n                  <div className=\"flex items-center\">\n                    <UsersIcon className=\"h-8 w-8 text-blue-600\" />\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-blue-600\">Usuários</p>\n                      <p className=\"text-2xl font-bold text-blue-900\">{stats.totalUsuarios}</p>\n                      <p className=\"text-sm text-blue-600\">{stats.usuariosAtivos} ativos</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-green-50 rounded-lg p-6\">\n                  <div className=\"flex items-center\">\n                    <ChartBarIcon className=\"h-8 w-8 text-green-600\" />\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-green-600\">Níveis</p>\n                      <p className=\"text-2xl font-bold text-green-900\">{stats.totalNiveis}</p>\n                      <p className=\"text-sm text-green-600\">{stats.niveisAtivos} ativos</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-purple-50 rounded-lg p-6\">\n                  <div className=\"flex items-center\">\n                    <BuildingOfficeIcon className=\"h-8 w-8 text-purple-600\" />\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-purple-600\">Filiais</p>\n                      <p className=\"text-2xl font-bold text-purple-900\">{stats.totalFiliais}</p>\n                      <p className=\"text-sm text-purple-600\">{stats.filiaisAtivas} ativas</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Usuários Tab */}\n          {activeTab === 'usuarios' && (\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Usuários do Sistema</h3>\n                <button\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\"\n                  onClick={() => { setEditingUser(null); setUserModalOpen(true); }}\n                >\n                  <PlusIcon className=\"h-4 w-4 mr-2\" />\n                  Novo Usuário\n                </button>\n              </div>\n\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Usuário\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Cargo/Setor\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Admin\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Ações\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {usuarios.map((usuario) => (\n                      <tr key={usuario.id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div>\n                            <div className=\"text-sm font-medium text-gray-900\">{usuario.nome}</div>\n                            <div className=\"text-sm text-gray-500\">{usuario.email}</div>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm text-gray-900\">{usuario.cargo}</div>\n                          <div className=\"text-sm text-gray-500\">{usuario.setor}</div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                            usuario.ativo ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                          }`}>\n                            {usuario.ativo ? <CheckCircleIcon className=\"h-4 w-4 mr-1\" /> : <XCircleIcon className=\"h-4 w-4 mr-1\" />}\n                            {usuario.ativo ? 'Ativo' : 'Inativo'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                            usuario.admin ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'\n                          }`}>\n                            {usuario.admin ? 'Sim' : 'Não'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                          <div className=\"flex space-x-2\">\n                            <button\n                              onClick={() => handleEditUser(usuario)}\n                              className=\"text-blue-600 hover:text-blue-900\"\n                              title=\"Editar usuário\"\n                            >\n                              <PencilIcon className=\"h-4 w-4\" />\n                            </button>\n                            <button\n                              onClick={() => openFluxoModal(usuario)}\n                              className=\"inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-green-100 border border-green-300 rounded hover:bg-green-200\"\n                              title=\"Configurar fluxo de aprovação\"\n                            >\n                              <ArrowPathIcon className=\"h-3 w-3 mr-1\" />\n                              Fluxo\n                            </button>\n                            <button\n                              onClick={() => {\n                                console.log('Botão de ativar/desativar clicado para usuário:', usuario);\n                                handleToggleStatus('usuario', usuario.id, usuario.ativo);\n                              }}\n                              className=\"text-yellow-600 hover:text-yellow-900\"\n                              title={usuario.ativo ? 'Desativar usuário' : 'Ativar usuário'}\n                            >\n                              {usuario.ativo ? <XCircleIcon className=\"h-4 w-4\" /> : <CheckCircleIcon className=\"h-4 w-4\" />}\n                            </button>\n                            <button\n                              onClick={() => handleDelete('usuario', usuario.id)}\n                              className=\"text-red-600 hover:text-red-900\"\n                              title=\"Excluir usuário\"\n                            >\n                              <TrashIcon className=\"h-4 w-4\" />\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n\n          {/* Níveis Tab */}\n          {activeTab === 'niveis' && (\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Níveis de Aprovação</h3>\n                <button \n                  onClick={() => setNivelModalOpen(true)}\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\"\n                >\n                  <PlusIcon className=\"h-4 w-4 mr-2\" />\n                  Novo Nível\n                </button>\n              </div>\n\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Nível\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Prioridade\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Permissões\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Ações\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {niveis.map((nivel) => (\n                      <tr key={nivel.id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm font-medium text-gray-900\">{nivel.nome}</div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm text-gray-900\">{nivel.prioridade}</div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex flex-wrap gap-2 items-center\">\n                            <span className={`inline-flex items-center px-2 py-1 rounded text-xs ${\n                              nivel.podeCriarOrcamento ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                            }`}>\n                              {nivel.podeCriarOrcamento ? 'Criar' : 'Não Criar'}\n                            </span>\n                            <span className={`inline-flex items-center px-2 py-1 rounded text-xs ${\n                              nivel.podeAprovar ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800'\n                            }`}>\n                              {nivel.podeAprovar ? 'Aprovar' : 'Não Aprovar'}\n                            </span>\n                            <span className={`inline-flex items-center px-2 py-1 rounded text-xs ${\n                              nivel.nivelFinal ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'\n                            }`}>\n                              {nivel.nivelFinal ? 'Final' : 'Não Final'}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                            nivel.ativo ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                          }`}>\n                            {nivel.ativo ? <CheckCircleIcon className=\"h-4 w-4 mr-1\" /> : <XCircleIcon className=\"h-4 w-4 mr-1\" />}\n                            {nivel.ativo ? 'Ativo' : 'Inativo'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                          <div className=\"flex items-center justify-end space-x-2\">\n                            <button \n                              onClick={() => handleEditNivel(nivel)}\n                              className=\"text-green-600 hover:text-green-900\"\n                              title=\"Editar nível\"\n                            >\n                              <PencilIcon className=\"h-4 w-4\" />\n                            </button>\n                            <button \n                              onClick={() => handleDelete('nivel', nivel.id)}\n                              className=\"text-red-600 hover:text-red-900\"\n                              title=\"Excluir nível\"\n                            >\n                              <TrashIcon className=\"h-4 w-4\" />\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n\n          {/* Ferramentas de Teste (apenas admin) */}\n          {user?.admin && (\n            <div className=\"mt-8 p-4 border rounded bg-yellow-50\">\n              <h4 className=\"font-bold mb-2 text-yellow-800\">Ferramentas de Teste</h4>\n              <button\n                className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\n                onClick={async () => {\n                  if (window.confirm('Tem certeza que deseja limpar TODOS os orçamentos do banco? Esta ação não pode ser desfeita!')) {\n                    try {\n                      const token = localStorage.getItem('token');\n                      const res = await fetch(`http://192.168.1.120:5000/api/orcamentos/limpar-todos`, {\n                        method: 'DELETE',\n                        headers: { 'Authorization': `Bearer ${token}` }\n                      });\n                      if (res.ok) {\n                        alert('Todos os orçamentos foram removidos com sucesso!');\n                      } else {\n                        const data = await res.json();\n                        alert('Erro ao limpar orçamentos: ' + (data.error || 'Erro desconhecido.'));\n                      }\n                    } catch (e) {\n                      alert('Erro ao conectar com o servidor.');\n                    }\n                  }\n                }}\n              >\n                Limpar banco de orçamentos (TESTE)\n              </button>\n              <p className=\"text-xs text-yellow-700 mt-2\">Este botão remove todos os orçamentos, aprovações e rejeições do banco. Use apenas para testes! No projeto final, remova este botão.</p>\n            </div>\n          )}\n\n          {/* Filiais Tab */}\n          {activeTab === 'filiais' && (\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Filiais</h3>\n                <button \n                  onClick={() => setFilialModalOpen(true)}\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\"\n                >\n                  <PlusIcon className=\"h-4 w-4 mr-2\" />\n                  Nova Filial\n                </button>\n              </div>\n\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Filial\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Contato\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Ações\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {filiais.map((filial) => (\n                      <tr key={filial.id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div>\n                            <div className=\"text-sm font-medium text-gray-900\">{filial.nome}</div>\n                            {filial.endereco && (\n                              <div className=\"text-sm text-gray-500\">{filial.endereco}</div>\n                            )}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm text-gray-900\">{filial.telefone || 'N/A'}</div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                            filial.ativo ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                          }`}>\n                            {filial.ativo ? <CheckCircleIcon className=\"h-4 w-4 mr-1\" /> : <XCircleIcon className=\"h-4 w-4 mr-1\" />}\n                            {filial.ativo ? 'Ativa' : 'Inativa'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                          <div className=\"flex items-center justify-end space-x-2\">\n                            <button \n                              onClick={() => handleViewFilial(filial)}\n                              className=\"text-blue-600 hover:text-blue-900\"\n                              title=\"Visualizar filial\"\n                            >\n                              <EyeIcon className=\"h-4 w-4\" />\n                            </button>\n                            <button \n                              onClick={() => handleEditFilial(filial)}\n                              className=\"text-green-600 hover:text-green-900\"\n                              title=\"Editar filial\"\n                            >\n                              <PencilIcon className=\"h-4 w-4\" />\n                            </button>\n                            <button \n                              onClick={() => handleDelete('filial', filial.id)}\n                              className=\"text-red-600 hover:text-red-900\"\n                              title=\"Excluir filial\"\n                            >\n                              <TrashIcon className=\"h-4 w-4\" />\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modal de Fluxo Personalizado */}\n      {fluxoModal && selectedUser && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">\n                Fluxo de Aprovação - {selectedUser.nome}\n              </h3>\n              <button\n                onClick={() => setFluxoModal(false)}\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Configure a ordem de aprovação para este usuário. Os orçamentos seguirão esta sequência.\n              </p>\n              \n              {/* Fluxo atual */}\n              <div className=\"mb-4\">\n                <h4 className=\"font-medium mb-2\">Fluxo Atual:</h4>\n                {userFluxo.length === 0 ? (\n                  <p className=\"text-gray-500 italic\">Nenhum fluxo personalizado configurado (usará fluxo padrão)</p>\n                ) : (\n                  <div className=\"space-y-2\">\n                    {userFluxo.map((item, index) => (\n                      <div key={item.id || index} className=\"flex items-center justify-between bg-gray-50 p-3 rounded\">\n                        <div className=\"flex items-center space-x-3\">\n                          <span className=\"bg-blue-500 text-white px-2 py-1 rounded text-sm\">\n                            {index + 1}\n                          </span>\n                          <span className=\"font-medium\">{item.nivel.nome}</span>\n                        </div>\n                        <div className=\"flex space-x-2\">\n                          {index > 0 && (\n                            <button\n                              onClick={() => moveNivelInFluxo(index, index - 1)}\n                              className=\"text-blue-600 hover:text-blue-800\"\n                            >\n                              ↑\n                            </button>\n                          )}\n                          {index < userFluxo.length - 1 && (\n                            <button\n                              onClick={() => moveNivelInFluxo(index, index + 1)}\n                              className=\"text-blue-600 hover:text-blue-800\"\n                            >\n                              ↓\n                            </button>\n                          )}\n                          <button\n                            onClick={() => removeNivelFromFluxo(index)}\n                            className=\"text-red-600 hover:text-red-800\"\n                          >\n                            <XMarkIcon className=\"h-4 w-4\" />\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              {/* Adicionar níveis */}\n              <div className=\"mb-4\">\n                <h4 className=\"font-medium mb-2\">Adicionar Nível:</h4>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                  {niveis\n                    .filter(nivel => !userFluxo.some(item => item.nivelId === nivel.id || item.nivel?.id === nivel.id))\n                    .map(nivel => (\n                      <button\n                        key={nivel.id}\n                        onClick={() => addNivelToFluxo(nivel)}\n                        className=\"text-left p-2 border rounded hover:bg-gray-50\"\n                      >\n                        {nivel.nome}\n                      </button>\n                    ))}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end space-x-3\">\n              <button\n                onClick={removeUserFluxo}\n                className=\"px-4 py-2 text-red-600 border border-red-600 rounded hover:bg-red-50\"\n              >\n                Remover Fluxo\n              </button>\n              <button\n                onClick={saveUserFluxo}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n              >\n                Salvar Fluxo\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal de usuário */}\n      <UserModal\n        open={userModalOpen}\n        onClose={() => { setUserModalOpen(false); setEditingUser(null); }}\n        onSave={editingUser ? handleUpdateUser : handleCreateUser}\n        initialData={editingUser}\n        niveis={niveis}\n        usuarios={usuarios}\n      />\n\n      {/* Modal de nível */}\n      <NivelModal\n        open={nivelModalOpen}\n        onClose={() => { setNivelModalOpen(false); setEditingNivel(null); }}\n        onSave={editingNivel ? handleUpdateNivel : handleCreateNivel}\n        initialData={editingNivel}\n      />\n\n      {/* Modal de filial */}\n      <FilialModal\n        open={filialModalOpen}\n        onClose={() => { setFilialModalOpen(false); setEditingFilial(null); }}\n        onSave={editingFilial ? handleUpdateFilial : handleCreateFilial}\n        initialData={editingFilial}\n      />\n\n      {/* Modal de visualização de filial */}\n      {viewingFilial && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-medium\">Detalhes da Filial</h3>\n              <button\n                onClick={() => setViewingFilial(null)}\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Nome da Filial\n                </label>\n                <p className=\"text-sm text-gray-900\">{viewingFilial.nome}</p>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Endereço\n                </label>\n                <p className=\"text-sm text-gray-900\">{viewingFilial.endereco || 'Não informado'}</p>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Telefone\n                </label>\n                <p className=\"text-sm text-gray-900\">{viewingFilial.telefone || 'Não informado'}</p>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Status\n                </label>\n                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                  viewingFilial.ativo ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                }`}>\n                  {viewingFilial.ativo ? <CheckCircleIcon className=\"h-4 w-4 mr-1\" /> : <XCircleIcon className=\"h-4 w-4 mr-1\" />}\n                  {viewingFilial.ativo ? 'Ativa' : 'Inativa'}\n                </span>\n              </div>\n            </div>\n            <div className=\"flex justify-end mt-6\">\n              <button\n                onClick={() => setViewingFilial(null)}\n                className=\"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\"\n              >\n                Fechar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Admin; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}