{"ast":null,"code":"import _objectSpread from\"/var/www/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{ArrowLeftIcon,DocumentTextIcon,CurrencyDollarIcon,BuildingOfficeIcon,UserIcon,LinkIcon}from'@heroicons/react/24/outline';import{useAuth}from'../contexts/AuthContext';import Notification from'../components/Notification';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditarOrcamento=()=>{const{id}=useParams();const navigate=useNavigate();const{user}=useAuth();const[loading,setLoading]=useState(true);const[submitting,setSubmitting]=useState(false);const[filiais,setFiliais]=useState([]);const[orcamento,setOrcamento]=useState(null);const[uploadedFiles,setUploadedFiles]=useState([]);const[uploadedDocuments,setUploadedDocuments]=useState([]);const[notification,setNotification]=useState({type:'success',message:'',isVisible:false});const[formData,setFormData]=useState({titulo:'',descricao:'',valor:'',quantidade:'1',fornecedor:'',links:'',anexos:'',observacoes:'',filialId:''});const[errors,setErrors]=useState({});const[valorTotal,setValorTotal]=useState('0,00');useEffect(()=>{if(id){fetchOrcamento();fetchFiliais();}},[id]);useEffect(()=>{let valor=parseFloat(formData.valor.replace(',','.')||'0');let quantidade=parseInt(formData.quantidade||'0');if(isNaN(valor))valor=0;if(isNaN(quantidade))quantidade=0;const total=valor*quantidade;setValorTotal(total.toLocaleString('pt-BR',{minimumFractionDigits:2,maximumFractionDigits:2}));},[formData.valor,formData.quantidade]);const fetchOrcamento=async()=>{try{const token=localStorage.getItem('token');const response=await fetch(\"http://localhost:5000/api/orcamentos/\".concat(id),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setOrcamento(data);// Preencher o formulário com os dados do orçamento\nsetFormData({titulo:data.titulo,descricao:data.descricao,valor:data.valor.toString(),quantidade:data.quantidade.toString(),fornecedor:data.fornecedor||'',links:data.links||'',anexos:data.anexos||'',observacoes:data.observacoes||'',filialId:data.filial.id.toString()});}else{alert('Orçamento não encontrado');navigate('/dashboard');}}catch(error){console.error('Erro ao carregar orçamento:',error);alert('Erro ao carregar orçamento');navigate('/dashboard');}finally{setLoading(false);}};const fetchFiliais=async()=>{try{const token=localStorage.getItem('token');const response=await fetch('http://localhost:5000/api/filiais',{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setFiliais(data);}}catch(error){console.error('Erro ao carregar filiais:',error);}};const handleInputChange=e=>{const{name,value,type}=e.target;if(name==='valor'){let numericValue=value.replace(/[^\\d,]/g,'');numericValue=numericValue.replace(/,+/g,',');const commaIndex=numericValue.indexOf(',');if(commaIndex!==-1){const beforeComma=numericValue.substring(0,commaIndex);const afterComma=numericValue.substring(commaIndex+1).replace(/,/g,'');const limitedAfterComma=afterComma.substring(0,2);numericValue=beforeComma+','+limitedAfterComma;}setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:numericValue}));}else if(name==='quantidade'){// Garante que quantidade nunca fique vazia e só aceita números inteiros positivos\nlet quantidade=value.replace(/[^\\d]/g,'');if(quantidade===''||quantidade==='0')quantidade='1';setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:quantidade}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));}if(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const handleFileUpload=(e,type)=>{const files=Array.from(e.target.files||[]);files.forEach(file=>{const uploadedFile={file,preview:URL.createObjectURL(file),name:file.name};if(type==='fotos'){setUploadedFiles(prev=>[...prev,uploadedFile]);}else{setUploadedDocuments(prev=>[...prev,uploadedFile]);}});};const removeFile=(index,type)=>{if(type==='fotos'){setUploadedFiles(prev=>{const newFiles=[...prev];URL.revokeObjectURL(newFiles[index].preview);newFiles.splice(index,1);return newFiles;});}else{setUploadedDocuments(prev=>{const newFiles=[...prev];URL.revokeObjectURL(newFiles[index].preview);newFiles.splice(index,1);return newFiles;});}};const validateForm=()=>{const newErrors={};if(!formData.titulo.trim()){newErrors.titulo='Título é obrigatório';}if(!formData.descricao.trim()){newErrors.descricao='Descrição é obrigatória';}if(!formData.valor.trim()){newErrors.valor='Valor é obrigatório';}else{const valor=parseFloat(formData.valor.replace(',','.'));if(isNaN(valor)||valor<=0){newErrors.valor='Valor deve ser um número positivo';}}if(!formData.quantidade.trim()){newErrors.quantidade='Quantidade é obrigatória';}else{const quantidade=parseInt(formData.quantidade);if(isNaN(quantidade)||quantidade<=0){newErrors.quantidade='Quantidade deve ser um número positivo';}}if(!formData.filialId){newErrors.filialId='Filial é obrigatória';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();setLoading(true);// Validação\nconst newErrors={};if(!formData.titulo.trim())newErrors.titulo='Título é obrigatório';if(!formData.descricao.trim())newErrors.descricao='Descrição é obrigatória';if(!formData.valor||parseFloat(formData.valor.replace(',','.'))<=0){newErrors.valor='Valor deve ser maior que zero';}if(!formData.filialId)newErrors.filialId='Filial é obrigatória';if(!formData.quantidade||parseInt(formData.quantidade)<=0){newErrors.quantidade='Quantidade deve ser maior que zero';}if(Object.keys(newErrors).length>0){setErrors(newErrors);setLoading(false);return;}try{const token=localStorage.getItem('token');const valorNumerico=parseFloat(formData.valor.replace(',','.'));const quantidade=parseInt(formData.quantidade);const dataToSend={titulo:formData.titulo,descricao:formData.descricao,valor:valorNumerico,quantidade:quantidade,fornecedor:formData.fornecedor,links:formData.links,observacoes:formData.observacoes};const response=await fetch(\"http://localhost:5000/api/orcamentos/\".concat(id),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(dataToSend)});if(response.ok){setNotification({type:'success',message:'Orçamento atualizado com sucesso!',isVisible:true});// Redirecionar após 2 segundos\nsetTimeout(()=>{navigate('/dashboard');},2000);}else{const errorData=await response.json();setNotification({type:'error',message:errorData.error||errorData.message||'Erro ao atualizar orçamento',isVisible:true});}}catch(error){console.error('Erro ao atualizar orçamento:',error);setNotification({type:'error',message:'Erro ao atualizar orçamento. Tente novamente.',isVisible:true});}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}if(!orcamento){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Or\\xE7amento n\\xE3o encontrado\"})});}// Verificar se o orçamento pode ser editado\nif(orcamento.status!=='PENDENTE'){return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"mr-4 p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:[\"Editar Or\\xE7amento #\",orcamento.id]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-600\",children:orcamento.titulo})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-yellow-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-yellow-800\",children:\"Or\\xE7amento n\\xE3o pode ser editado\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-sm text-yellow-700\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Este or\\xE7amento n\\xE3o pode ser editado porque seu status atual \\xE9 \\\"\",orcamento.status,\"\\\". Apenas or\\xE7amentos com status \\\"PENDENTE\\\" podem ser editados.\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"bg-yellow-50 px-2 py-1.5 rounded-md text-sm font-medium text-yellow-800 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-yellow-50 focus:ring-yellow-600\",children:\"Voltar para Or\\xE7amentos\"})})]})]})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900\",children:[/*#__PURE__*/_jsx(Notification,{type:notification.type,message:notification.message,isVisible:notification.isVisible,onClose:()=>setNotification(prev=>_objectSpread(_objectSpread({},prev),{},{isVisible:false}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"mr-4 p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:[\"Editar Or\\xE7amento #\",orcamento.id]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-gray-600\",children:orcamento.titulo})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-5 w-5 mr-2 text-blue-600\"}),\"Informa\\xE7\\xF5es B\\xE1sicas\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"titulo\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"T\\xEDtulo *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"titulo\",name:\"titulo\",value:formData.titulo,onChange:handleInputChange,className:\"block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm \".concat(errors.titulo?'border-red-300':'border-gray-300'),placeholder:\"Digite o t\\xEDtulo do or\\xE7amento\"}),errors.titulo&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.titulo})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantidade\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Quantidade *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantidade\",name:\"quantidade\",value:formData.quantidade,onChange:handleInputChange,min:\"1\",className:\"block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm \".concat(errors.quantidade?'border-red-300':'border-gray-300'),placeholder:\"1\"}),errors.quantidade&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.quantidade})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"valor\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Valor Unit\\xE1rio (R$) *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"valor\",name:\"valor\",value:formData.valor,onChange:handleInputChange,className:\"block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm \".concat(errors.valor?'border-red-300':'border-gray-300'),placeholder:\"0,00\"})]}),errors.valor&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.valor})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold text-blue-900\",children:\"Valor Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-blue-600\",children:[\"R$ \",valorTotal]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"descricao\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Descri\\xE7\\xE3o *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"descricao\",name:\"descricao\",rows:4,value:formData.descricao,onChange:handleInputChange,className:\"block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm \".concat(errors.descricao?'border-red-300':'border-gray-300'),placeholder:\"Descreva detalhadamente o que est\\xE1 sendo solicitado\"}),errors.descricao&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.descricao})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(BuildingOfficeIcon,{className:\"h-5 w-5 mr-2 text-green-600\"}),\"Configura\\xE7\\xF5es\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-1 gap-6\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"filialId\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Filial *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"filialId\",name:\"filialId\",value:formData.filialId,onChange:handleInputChange,className:\"block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm \".concat(errors.filialId?'border-red-300':'border-gray-300'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione uma filial\"}),filiais.map(filial=>/*#__PURE__*/_jsx(\"option\",{value:filial.id,children:filial.nome},filial.id))]}),errors.filialId&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.filialId})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-5 w-5 mr-2 text-purple-600\"}),\"Informa\\xE7\\xF5es Adicionais\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-1 gap-6\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fornecedor\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Fornecedor\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"fornecedor\",name:\"fornecedor\",value:formData.fornecedor,onChange:handleInputChange,className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",placeholder:\"Nome do fornecedor (opcional)\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"links\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Links\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(LinkIcon,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"links\",name:\"links\",value:formData.links,onChange:handleInputChange,className:\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",placeholder:\"Links \\xFAteis (opcional)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"observacoes\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Observa\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"observacoes\",name:\"observacoes\",rows:3,value:formData.observacoes,onChange:handleInputChange,className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",placeholder:\"Observa\\xE7\\xF5es adicionais (opcional)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/dashboard'),className:\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:submitting,className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:submitting?'Atualizando...':'Atualizar Orçamento'})]})]})})]})]});};export default EditarOrcamento;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ArrowLeftIcon","DocumentTextIcon","CurrencyDollarIcon","BuildingOfficeIcon","UserIcon","LinkIcon","useAuth","Notification","jsx","_jsx","jsxs","_jsxs","EditarOrcamento","id","navigate","user","loading","setLoading","submitting","setSubmitting","filiais","setFiliais","orcamento","setOrcamento","uploadedFiles","setUploadedFiles","uploadedDocuments","setUploadedDocuments","notification","setNotification","type","message","isVisible","formData","setFormData","titulo","descricao","valor","quantidade","fornecedor","links","anexos","observacoes","filialId","errors","setErrors","valorTotal","setValorTotal","fetchOrcamento","fetchFiliais","parseFloat","replace","parseInt","isNaN","total","toLocaleString","minimumFractionDigits","maximumFractionDigits","token","localStorage","getItem","response","fetch","concat","headers","ok","data","json","toString","filial","alert","error","console","handleInputChange","e","name","value","target","numericValue","commaIndex","indexOf","beforeComma","substring","afterComma","limitedAfterComma","prev","_objectSpread","handleFileUpload","files","Array","from","forEach","file","uploadedFile","preview","URL","createObjectURL","removeFile","index","newFiles","revokeObjectURL","splice","validateForm","newErrors","trim","Object","keys","length","handleSubmit","preventDefault","valorNumerico","dataToSend","method","body","JSON","stringify","setTimeout","errorData","className","children","status","onClick","viewBox","fill","fillRule","d","clipRule","onClose","onSubmit","htmlFor","onChange","placeholder","min","rows","map","nome","disabled"],"sources":["/var/www/frontend/src/pages/EditarOrcamento.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  ArrowLeftIcon,\n  DocumentTextIcon,\n  CurrencyDollarIcon,\n  BuildingOfficeIcon,\n  UserIcon,\n  LinkIcon,\n  PhotoIcon,\n  PaperClipIcon,\n  XMarkIcon\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../contexts/AuthContext';\nimport Notification from '../components/Notification';\n\ninterface Filial {\n  id: number;\n  nome: string;\n}\n\ninterface Orcamento {\n  id: number;\n  titulo: string;\n  descricao: string;\n  valor: number;\n  quantidade: number;\n  fornecedor?: string;\n  links?: string;\n  fotos?: string;\n  anexos?: string;\n  observacoes?: string;\n  status: string;\n  filial: {\n    id: number;\n    nome: string;\n  };\n}\n\ninterface UploadedFile {\n  file: File;\n  preview: string;\n  name: string;\n}\n\nconst EditarOrcamento: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [filiais, setFiliais] = useState<Filial[]>([]);\n  const [orcamento, setOrcamento] = useState<Orcamento | null>(null);\n  const [uploadedFiles, setUploadedFiles] = useState<UploadedFile[]>([]);\n  const [uploadedDocuments, setUploadedDocuments] = useState<UploadedFile[]>([]);\n  const [notification, setNotification] = useState<{\n    type: 'success' | 'error';\n    message: string;\n    isVisible: boolean;\n  }>({\n    type: 'success',\n    message: '',\n    isVisible: false\n  });\n\n  const [formData, setFormData] = useState({\n    titulo: '',\n    descricao: '',\n    valor: '',\n    quantidade: '1',\n    fornecedor: '',\n    links: '',\n    anexos: '',\n    observacoes: '',\n    filialId: ''\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [valorTotal, setValorTotal] = useState('0,00');\n\n  useEffect(() => {\n    if (id) {\n      fetchOrcamento();\n      fetchFiliais();\n    }\n  }, [id]);\n\n  useEffect(() => {\n    let valor = parseFloat(formData.valor.replace(',', '.') || '0');\n    let quantidade = parseInt(formData.quantidade || '0');\n    if (isNaN(valor)) valor = 0;\n    if (isNaN(quantidade)) quantidade = 0;\n    const total = valor * quantidade;\n    setValorTotal(total.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }));\n  }, [formData.valor, formData.quantidade]);\n\n  const fetchOrcamento = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://localhost:5000/api/orcamentos/${id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setOrcamento(data);\n        \n        // Preencher o formulário com os dados do orçamento\n        setFormData({\n          titulo: data.titulo,\n          descricao: data.descricao,\n          valor: data.valor.toString(),\n          quantidade: data.quantidade.toString(),\n          fornecedor: data.fornecedor || '',\n          links: data.links || '',\n          anexos: data.anexos || '',\n          observacoes: data.observacoes || '',\n          filialId: data.filial.id.toString()\n        });\n      } else {\n        alert('Orçamento não encontrado');\n        navigate('/dashboard');\n      }\n    } catch (error) {\n      console.error('Erro ao carregar orçamento:', error);\n      alert('Erro ao carregar orçamento');\n      navigate('/dashboard');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFiliais = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://localhost:5000/api/filiais', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setFiliais(data);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar filiais:', error);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n\n    if (name === 'valor') {\n      let numericValue = value.replace(/[^\\d,]/g, '');\n      numericValue = numericValue.replace(/,+/g, ',');\n      const commaIndex = numericValue.indexOf(',');\n      if (commaIndex !== -1) {\n        const beforeComma = numericValue.substring(0, commaIndex);\n        const afterComma = numericValue.substring(commaIndex + 1).replace(/,/g, '');\n        const limitedAfterComma = afterComma.substring(0, 2);\n        numericValue = beforeComma + ',' + limitedAfterComma;\n      }\n      setFormData(prev => ({\n        ...prev,\n        [name]: numericValue\n      }));\n    } else if (name === 'quantidade') {\n      // Garante que quantidade nunca fique vazia e só aceita números inteiros positivos\n      let quantidade = value.replace(/[^\\d]/g, '');\n      if (quantidade === '' || quantidade === '0') quantidade = '1';\n      setFormData(prev => ({\n        ...prev,\n        [name]: quantidade\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>, type: 'fotos' | 'anexos') => {\n    const files = Array.from(e.target.files || []);\n    \n    files.forEach(file => {\n      const uploadedFile: UploadedFile = {\n        file,\n        preview: URL.createObjectURL(file),\n        name: file.name\n      };\n\n      if (type === 'fotos') {\n        setUploadedFiles(prev => [...prev, uploadedFile]);\n      } else {\n        setUploadedDocuments(prev => [...prev, uploadedFile]);\n      }\n    });\n  };\n\n  const removeFile = (index: number, type: 'fotos' | 'anexos') => {\n    if (type === 'fotos') {\n      setUploadedFiles(prev => {\n        const newFiles = [...prev];\n        URL.revokeObjectURL(newFiles[index].preview);\n        newFiles.splice(index, 1);\n        return newFiles;\n      });\n    } else {\n      setUploadedDocuments(prev => {\n        const newFiles = [...prev];\n        URL.revokeObjectURL(newFiles[index].preview);\n        newFiles.splice(index, 1);\n        return newFiles;\n      });\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.titulo.trim()) {\n      newErrors.titulo = 'Título é obrigatório';\n    }\n\n    if (!formData.descricao.trim()) {\n      newErrors.descricao = 'Descrição é obrigatória';\n    }\n\n    if (!formData.valor.trim()) {\n      newErrors.valor = 'Valor é obrigatório';\n    } else {\n      const valor = parseFloat(formData.valor.replace(',', '.'));\n      if (isNaN(valor) || valor <= 0) {\n        newErrors.valor = 'Valor deve ser um número positivo';\n      }\n    }\n\n    if (!formData.quantidade.trim()) {\n      newErrors.quantidade = 'Quantidade é obrigatória';\n    } else {\n      const quantidade = parseInt(formData.quantidade);\n      if (isNaN(quantidade) || quantidade <= 0) {\n        newErrors.quantidade = 'Quantidade deve ser um número positivo';\n      }\n    }\n\n    if (!formData.filialId) {\n      newErrors.filialId = 'Filial é obrigatória';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    // Validação\n    const newErrors: Record<string, string> = {};\n    if (!formData.titulo.trim()) newErrors.titulo = 'Título é obrigatório';\n    if (!formData.descricao.trim()) newErrors.descricao = 'Descrição é obrigatória';\n    if (!formData.valor || parseFloat(formData.valor.replace(',', '.')) <= 0) {\n      newErrors.valor = 'Valor deve ser maior que zero';\n    }\n    if (!formData.filialId) newErrors.filialId = 'Filial é obrigatória';\n    if (!formData.quantidade || parseInt(formData.quantidade) <= 0) {\n      newErrors.quantidade = 'Quantidade deve ser maior que zero';\n    }\n\n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      const valorNumerico = parseFloat(formData.valor.replace(',', '.'));\n      const quantidade = parseInt(formData.quantidade);\n      \n      const dataToSend = {\n        titulo: formData.titulo,\n        descricao: formData.descricao,\n        valor: valorNumerico,\n        quantidade: quantidade,\n        fornecedor: formData.fornecedor,\n        links: formData.links,\n        observacoes: formData.observacoes\n      };\n      \n      const response = await fetch(`http://localhost:5000/api/orcamentos/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(dataToSend)\n      });\n\n      if (response.ok) {\n        setNotification({\n          type: 'success',\n          message: 'Orçamento atualizado com sucesso!',\n          isVisible: true\n        });\n        \n        // Redirecionar após 2 segundos\n        setTimeout(() => {\n          navigate('/dashboard');\n        }, 2000);\n      } else {\n        const errorData = await response.json();\n        setNotification({\n          type: 'error',\n          message: errorData.error || errorData.message || 'Erro ao atualizar orçamento',\n          isVisible: true\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao atualizar orçamento:', error);\n      setNotification({\n        type: 'error',\n        message: 'Erro ao atualizar orçamento. Tente novamente.',\n        isVisible: true\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!orcamento) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-gray-500\">Orçamento não encontrado</p>\n      </div>\n    );\n  }\n\n  // Verificar se o orçamento pode ser editado\n  if (orcamento.status !== 'PENDENTE') {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate('/dashboard')}\n              className=\"mr-4 p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100\"\n            >\n              <ArrowLeftIcon className=\"h-5 w-5\" />\n            </button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Editar Orçamento #{orcamento.id}</h1>\n              <p className=\"mt-1 text-gray-600\">{orcamento.titulo}</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-5 w-5 text-yellow-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-yellow-800\">\n                Orçamento não pode ser editado\n              </h3>\n              <div className=\"mt-2 text-sm text-yellow-700\">\n                <p>\n                  Este orçamento não pode ser editado porque seu status atual é \"{orcamento.status}\".\n                  Apenas orçamentos com status \"PENDENTE\" podem ser editados.\n                </p>\n              </div>\n              <div className=\"mt-4\">\n                <button\n                  onClick={() => navigate('/dashboard')}\n                  className=\"bg-yellow-50 px-2 py-1.5 rounded-md text-sm font-medium text-yellow-800 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-yellow-50 focus:ring-yellow-600\"\n                >\n                  Voltar para Orçamentos\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      <Notification\n        type={notification.type}\n        message={notification.message}\n        isVisible={notification.isVisible}\n        onClose={() => setNotification(prev => ({ ...prev, isVisible: false }))}\n      />\n      \n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate('/dashboard')}\n              className=\"mr-4 p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100\"\n            >\n              <ArrowLeftIcon className=\"h-5 w-5\" />\n            </button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Editar Orçamento #{orcamento.id}</h1>\n              <p className=\"mt-1 text-gray-600\">{orcamento.titulo}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow\">\n          <form onSubmit={handleSubmit} className=\"space-y-6 p-6\">\n            {/* Informações Básicas */}\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n                <DocumentTextIcon className=\"h-5 w-5 mr-2 text-blue-600\" />\n                Informações Básicas\n              </h3>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label htmlFor=\"titulo\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Título *\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"titulo\"\n                    name=\"titulo\"\n                    value={formData.titulo}\n                    onChange={handleInputChange}\n                    className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                      errors.titulo ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                    placeholder=\"Digite o título do orçamento\"\n                  />\n                  {errors.titulo && (\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.titulo}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label htmlFor=\"quantidade\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Quantidade *\n                  </label>\n                  <input\n                    type=\"number\"\n                    id=\"quantidade\"\n                    name=\"quantidade\"\n                    value={formData.quantidade}\n                    onChange={handleInputChange}\n                    min=\"1\"\n                    className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                      errors.quantidade ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                    placeholder=\"1\"\n                  />\n                  {errors.quantidade && (\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.quantidade}</p>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"mt-6\">\n                <label htmlFor=\"valor\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Valor Unitário (R$) *\n                </label>\n                <div className=\"relative\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <CurrencyDollarIcon className=\"h-5 w-5 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"text\"\n                    id=\"valor\"\n                    name=\"valor\"\n                    value={formData.valor}\n                    onChange={handleInputChange}\n                    className={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                      errors.valor ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                    placeholder=\"0,00\"\n                  />\n                </div>\n                {errors.valor && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.valor}</p>\n                )}\n              </div>\n\n              {/* Valor Total */}\n              <div className=\"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-lg font-semibold text-blue-900\">Valor Total:</span>\n                  <span className=\"text-2xl font-bold text-blue-600\">R$ {valorTotal}</span>\n                </div>\n              </div>\n\n              <div className=\"mt-6\">\n                <label htmlFor=\"descricao\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Descrição *\n                </label>\n                <textarea\n                  id=\"descricao\"\n                  name=\"descricao\"\n                  rows={4}\n                  value={formData.descricao}\n                  onChange={handleInputChange}\n                  className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                    errors.descricao ? 'border-red-300' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Descreva detalhadamente o que está sendo solicitado\"\n                />\n                {errors.descricao && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.descricao}</p>\n                )}\n              </div>\n            </div>\n\n            {/* Configurações */}\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n                <BuildingOfficeIcon className=\"h-5 w-5 mr-2 text-green-600\" />\n                Configurações\n              </h3>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-1 gap-6\">\n                <div>\n                  <label htmlFor=\"filialId\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Filial *\n                  </label>\n                  <select\n                    id=\"filialId\"\n                    name=\"filialId\"\n                    value={formData.filialId}\n                    onChange={handleInputChange}\n                    className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                      errors.filialId ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                  >\n                    <option value=\"\">Selecione uma filial</option>\n                    {filiais.map((filial) => (\n                      <option key={filial.id} value={filial.id}>\n                        {filial.nome}\n                      </option>\n                    ))}\n                  </select>\n                  {errors.filialId && (\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.filialId}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Informações Adicionais */}\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n                <UserIcon className=\"h-5 w-5 mr-2 text-purple-600\" />\n                Informações Adicionais\n              </h3>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-1 gap-6\">\n                <div>\n                  <label htmlFor=\"fornecedor\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Fornecedor\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"fornecedor\"\n                    name=\"fornecedor\"\n                    value={formData.fornecedor}\n                    onChange={handleInputChange}\n                    className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                    placeholder=\"Nome do fornecedor (opcional)\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"mt-6\">\n                <label htmlFor=\"links\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Links\n                </label>\n                <div className=\"relative\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <LinkIcon className=\"h-5 w-5 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"text\"\n                    id=\"links\"\n                    name=\"links\"\n                    value={formData.links}\n                    onChange={handleInputChange}\n                    className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                    placeholder=\"Links úteis (opcional)\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"mt-6\">\n                <label htmlFor=\"observacoes\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Observações\n                </label>\n                <textarea\n                  id=\"observacoes\"\n                  name=\"observacoes\"\n                  rows={3}\n                  value={formData.observacoes}\n                  onChange={handleInputChange}\n                  className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                  placeholder=\"Observações adicionais (opcional)\"\n                />\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\n              <button\n                type=\"button\"\n                onClick={() => navigate('/dashboard')}\n                className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Cancelar\n              </button>\n              <button\n                type=\"submit\"\n                disabled={submitting}\n                className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {submitting ? 'Atualizando...' : 'Atualizar Orçamento'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EditarOrcamento; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}